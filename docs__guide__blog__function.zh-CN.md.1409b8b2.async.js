(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"aP/H":function(e,t,n){"use strict";n.r(t);var a=n("3Nsx"),l=n.n(a),o=n("C8qh"),c=n("sBO+"),s=l.a.memo((e=>{e.demos;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("h1",{id:"ahooks-\u51fd\u6570\u5904\u7406\u89c4\u8303"},l.a.createElement(o["AnchorLink"],{to:"#ahooks-\u51fd\u6570\u5904\u7406\u89c4\u8303","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"ahooks \u51fd\u6570\u5904\u7406\u89c4\u8303"),l.a.createElement("p",null,"ahooks \u901a\u8fc7\u5bf9\u8f93\u5165\u8f93\u51fa\u51fd\u6570\u505a\u7279\u6b8a\u5904\u7406\uff0c\u5c3d\u529b\u5e2e\u52a9\u5927\u5bb6\u907f\u514d\u95ed\u5305\u95ee\u9898\u3002"),l.a.createElement("p",null,l.a.createElement("strong",null,"1. ahooks \u6240\u6709\u7684\u8f93\u51fa\u51fd\u6570\uff0c\u5730\u5740\u90fd\u662f\u4e0d\u4f1a\u53d8\u5316\u7684")),l.a.createElement(c["a"],{code:"const [state, setState] = React.useState();",lang:"ts"}),l.a.createElement("p",null,"\u4f17\u6240\u5468\u77e5\uff0c",l.a.createElement("code",null,"React.useState")," \u8fd4\u56de\u7684 ",l.a.createElement("code",null,"setState")," \u51fd\u6570\u5730\u5740\u662f\u56fa\u5b9a\u7684\uff0c\u4f7f\u7528\u65f6\u4e0d\u9700\u8981\u8003\u8651\u5947\u5947\u602a\u602a\u7684\u95ee\u9898\uff0c\u4e0d\u9700\u8981\u628a ",l.a.createElement("code",null,"setState")," \u653e\u5230\u5404\u79cd\u4f9d\u8d56\u4e2d\u3002"),l.a.createElement("p",null,"ahooks \u6240\u6709 Hooks \u8fd4\u56de\u7684\u51fd\u6570\uff0c\u90fd\u62e5\u6709\u548c ",l.a.createElement("code",null,"setState")," \u4e00\u6837\u7684\u7279\u6027\uff0c\u5730\u5740\u4e0d\u4f1a\u53d8\u5316\uff0c\u653e\u5fc3\u5927\u80c6\u7684\u4f7f\u7528\u5373\u53ef\u3002"),l.a.createElement("p",null,l.a.createElement("strong",null,"2. \u6240\u6709\u7528\u6237\u8f93\u5165\u7684\u51fd\u6570\uff0c\u6c38\u8fdc\u4f7f\u7528\u6700\u65b0\u7684\u4e00\u4efd")),l.a.createElement("p",null,"\u5bf9\u4e8e\u63a5\u6536\u7684\u51fd\u6570\uff0cahooks \u4f1a\u505a\u4e00\u6b21\u7279\u6b8a\u5904\u7406\uff0c\u4fdd\u8bc1\u6bcf\u6b21\u8c03\u7528\u7684\u51fd\u6570\u6c38\u8fdc\u662f\u6700\u65b0\u7684\u3002"),l.a.createElement(c["a"],{code:"const [state, setState] = useState();\n\nuseInterval(() => {\n  console.log(state);\n}, 1000);",lang:"ts"}),l.a.createElement("p",null,"\u6bd4\u5982\u4ee5\u4e0a\u793a\u4f8b\uff0c",l.a.createElement("code",null,"useInterval")," \u4efb\u4f55\u65f6\u5019\u8c03\u7528\u7684\u51fd\u6570\u6c38\u8fdc\u662f\u6700\u65b0\u7684\uff0c\u4e5f\u5c31\u662f state \u6c38\u8fdc\u662f\u6700\u65b0\u7684\u3002"),l.a.createElement("h2",{id:"\u5b9e\u73b0\u539f\u7406"},l.a.createElement(o["AnchorLink"],{to:"#\u5b9e\u73b0\u539f\u7406","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0\u539f\u7406"),l.a.createElement("p",null,"\u9488\u5bf9\u8f93\u5165\u51fd\u6570\uff0c\u6211\u4eec\u901a\u8fc7 ",l.a.createElement("code",null,"useRef")," \u505a\u4e00\u6b21\u8bb0\u5f55\uff0c\u4ee5\u4fdd\u8bc1\u5728\u4efb\u4f55\u5730\u65b9\u90fd\u80fd\u8bbf\u95ee\u5230\u6700\u65b0\u7684\u51fd\u6570\u3002"),l.a.createElement(c["a"],{code:"const fnRef = useRef(fn);\nfnRef.current = fn;",lang:"js"}),l.a.createElement("p",null,"\u6bd4\u5982 useUnmount \u4ee3\u7801\u5982\u4e0b\uff1a"),l.a.createElement(c["a"],{code:"const useUnmount = (fn) => {\n  const fnRef = useRef(fn);\n  fnRef.current = fn;\n\n  useEffect(\n    () => () => {\n      fnRef.current();\n    },\n    [],\n  );\n};",lang:"js"}),l.a.createElement("p",null,"\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e\u6211\u4eec\u901a\u8fc7 ref \u6765\u8bb0\u5fc6\u6700\u65b0\u7684\u51fd\u6570\uff0c\u89e3\u51b3\u95ed\u5305\u95ee\u9898\u3002"),l.a.createElement("p",null,"\u9488\u5bf9\u8f93\u51fa\u51fd\u6570\uff0c\u6211\u4eec\u901a\u8fc7 ahooks \u7684 ",l.a.createElement(o["Link"],{to:"/zh-CN/hooks/use-memoized-fn"},"useMemoizedFn")," \u5305\u88f9\uff0c\u4fdd\u8bc1\u5730\u5740\u6c38\u8fdc\u4e0d\u4f1a\u53d8\u5316\u3002"),l.a.createElement("p",null,"\u4e3e\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5047\u5982\u6211\u4eec\u6709\u4e00\u4e2a ",l.a.createElement("code",null,"useToggle")," Hook\uff0c\u4ee3\u7801\u662f\u8fd9\u6837\u7684"),l.a.createElement(c["a"],{code:"const useToggle = (left, right) => {\n  const [state, setState] = useState(left);\n\n  const toggle = useCallback(() => {\n    setState((s) => (s === left ? right : left));\n  }, [left, right]);\n\n  return [state, toggle];\n};",lang:"js"}),l.a.createElement("p",null,"\u8fd9\u4e2a demo \u4e2d\u8fd4\u56de\u7684 ",l.a.createElement("code",null,"toggle")," \u51fd\u6570\uff0c\u4f1a\u6839\u636e ",l.a.createElement("code",null,"left/right")," \u7684\u53d8\u5316\u800c\u53d8\u5316\u7684\uff0c\u7528\u6237\u7528\u8d77\u6765\u5f88\u96be\u53d7\u3002"),l.a.createElement("p",null,"\u7136\u540e\u6211\u4eec\u5c06 ",l.a.createElement("code",null,"useCallback")," \u66ff\u6362\u6210 ",l.a.createElement("code",null,"useMemoizedFn"),"\uff0c\u5373\u53ef\u5b9e\u73b0 ",l.a.createElement("code",null,"toggle")," \u5730\u5740\u6c38\u8fdc\u4e0d\u53d8\u5316\u3002"),l.a.createElement(c["a"],{code:"const useToggle = (left, right) => {\n  const [state, setState] = useState(left);\n\n  const toggle = useMemoizedFn(() => {\n    setState((s) => (s === left ? right : left));\n  });\n\n  return [state, toggle];\n};",lang:"js"})))}));t["default"]=e=>{var t=l.a.useContext(o["context"]),n=t.demos;return l.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.a.createElement(s,{demos:n})}}}]);